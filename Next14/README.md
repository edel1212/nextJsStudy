# Next.Js 14 Version

```properties
# âœ¨ ì´ì „ ë²„ì „ì„ 14ë²„ì „ìœ¼ë¡œ ì—…ë°ì´íŠ¸ í•œë‹¤ê³ í•´ì„œ ì‹¤í–‰ì´ ì•ˆë˜ê±°ë‚˜ í•˜ì§€ ì•ŠëŠ”ë‹¤.
#  - ì´ì „ ë²„ì „ì— ì‚¬ìš©í–ˆë˜ `pages router` ë°©ì‹ì€ ê·¸ëŒ€ë¡œ ì‚¬ìš© ê°€ëŠ¥í•˜ê¸° ë•Œë¬¸
#  - NextJs 14ëŠ” ë‘ê°€ì§€ Roter ë°©ì‹ì„ ì§€ì›í•¨  (13ë¶€í„° ì§€ì›í•˜ê¸´ í–ˆì—ˆë‹¤ - ê¶Œì¥í•˜ê¸°ë„ í–ˆì—ˆìŒ)
#   ã„´> Pages router , App routers
#  - ì›í•œë‹¤ë©´ ë‘ê°€ì§€ ë¼ìš°íŒ… ë°©ì‹ì„ í˜¼í•©í•´ì„œ ì‚¬ìš© ë˜í•œ ê°€ëŠ¥í•˜ë‹¤.
# âœï¸ ì£¼ì˜ì‚¬í•­ìœ¼ë¡œëŠ” í•œë²ˆì— ë²„ì „ì„ ì˜¬ë¦¬ê³  ë§ˆì´ê·¸ë ˆì´ì…˜ í•  í•„ìš”ê°€ ì—†ë‹¤
#   ã„´> ê¸°ì¡´ì˜ Page Router ë°©ì‹ì„ ì‚¬ìš©í•´ ê°€ë©´ì„œ í•˜ë‚˜ì”© App Rotuer ë°©ì‹ìœ¼ë¡œ ìˆ˜ì •í•´ ë‚˜ê°€ì
```

## 14ì´ì „ ë²„ì „ê³¼ ì°¨ì´

- `Data fetching` ë°©ì‹ì´ í¬ê²Œ ë³€í™” í•˜ì˜€ë‹¤.
  - `getStaticProps`, `getServerSideProps`, `getStatigPaht`ì™€ ê°™ì€ ë°©ì‹ë“¤ì´ ì‚¬ë¼ì¡Œë‹¤
- `App Rotuer`ë¥¼ ì‚¬ìš©í•´ì•¼ì§€ë§Œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ìµœì‹  ê¸°ëŠ¥ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤

## APP Router ì‚¬ìš© ë°©ë²•

```properties
# â„¹ï¸ Page Router ë°©ì‹ê³¼ ë¹„êµ
# - í˜ì´ì§€ëŠ” íŒŒì¼ ì´ë¦„ ê¸°ë°˜ìœ¼ë¡œ ê²½ë¡œì™€ ì—°ê²°ëœë‹¤.
#   ã„´> âœï¸ URL : https://domain/about-us
#      ã„´> ë””ë ‰í† ë¦¬ êµ¬ì¡° : app/pages/about-us/index.js
#
#   ã„´> âœï¸ URL :  https://domain/about-us/list
#      ã„´> ë””ë ‰í† ë¦¬ êµ¬ì¡° :  app/pages/about-us/list.js
```

- ë””ë ‰í† ë¦¬ ìƒì„± í›„ `page.tsx or js`ë¥¼ ìƒì„± í›„ export default function í•´ì£¼ë©´ ëœë‹¤.

  - âœ¨ ì¤‘ìš” í¬ì¸íŠ¸ëŠ” `paht`ê°€ ë˜ëŠ” ë””ë ‰í† ë¦¬ ë‚´ íŒŒì¼ì˜ ëª…ì€ `page.?`ë¡œ íŒŒì¼ëª…ì´ ê³ ì •ì´ë¼ëŠ” ê²ƒì´ë‹¤.

  ![Alt text](image.png)

- í•˜ìœ„ `Path`ê°€ ìˆëŠ” URLì„ êµ¬ì„±í•˜ê³  ì‹¶ì„ ê²½ìš°

  - í´ë”ë¥¼ ì›í•˜ëŠ” Path êµ¬ì¡°ë¡œ ë§Œë“  í›„ `page.?`íŒŒì¼ì„ ìƒì„±í•´ ì£¼ë©´ ëœë‹¤.

    ![Alt text](image-1.png)

## 404 í˜ì´ì§€ ì²˜ë¦¬

- `not-found.?` í˜•íƒœë¡œ íŒŒì¼ì„ ë§Œë“¤ì–´ì£¼ë©´ ëœë‹¤.

  - ì˜ˆì•½ëœ íŒŒì¼ëª…ìœ¼ë¡œ NextJsê°€ ìë™ìœ¼ë¡œ í•´ë‹¹ íŒŒì¼ì„ í™•ì¸í•˜ì—¬ ì½ì–´ 404ì²˜ë¦¬ë¥¼ í•´ì¤€ë‹¤.

  ![Alt text](image-2.png)

## SSR vs CSR

```properties
# ğŸ’¬ Renderingì´ë€?
# - Javascript Functionì„ ê°€ì ¸ì™€ì„œ ë¸Œë¼ìš°ì €ê°€ ì´í•´í•  ìˆ˜ ìˆëŠ” HTMLë¡œ ë°˜í™˜í•˜ëŠ” ê³¼ì •ì„ ë§í•œë‹¤.
```

- `CSR(Client Side Rendering)`
  - ëª¨ë“  UIêµ¬ì¶•ì´ Clientì—ì„œ javasriptë¥¼ ë¡œë“œ í›„ í•´ë‹¹ scriptë¥¼ í†µí•´ ì´ë¤„ì§€ëŠ” ë°©ì‹
    - ë”°ë¼ì„œ Javascripë¥¼ ë¶ˆëŸ¬ì˜¬ ë•Œê¹Œì§€ í™”ë©´ì´ ê·¸ë ¤ì§€ì§€ ì•ŠëŠ”ë‹¤.
    - NextJs14ì—ì„œ App Router ë°©ì‹ìœ¼ë¡œ `usePathname();`ë¥¼ ì‚¬ìš©í•˜ë ¤ í•˜ë©´ ì—ëŸ¬ê°€ ë°œìƒí•˜ëŠ” ì´ìœ ì´ê¸°ë„ í•˜ë‹¤.
- `SSR(Server Side Rendering)`
  - UI ìì²´ê°€ Server(Back-end)ì—ì„œ ìƒì„± í›„ HTMLë¡œ ë°˜í™˜í•´ì£¼ëŠ” ë°©ì‹
    - ëª¨ë“  ì»´í¬ë„ŒíŠ¸ì˜¤ í˜ì´ì§€ë“¤ì€ ë¨¼ì € Back-Endì—ì„œ Render ëœë‹¤.
  - NextJs14ì—ì„œëŠ” ê¸°ë³¸ì (Default)ìœ¼ë¡œ í•´ë‹¹ ë°©ë²•ìœ¼ë¡œ ëœë”ë§ì„ ì§„í–‰í•œë‹¤.
  - âœ¨ `"use client"`ë¥¼ ì‚¬ìš©í•˜ë©´ ëœë”ë§ ë°©ì‹ì´ CSRë¡œ ë°”ë€ŒëŠ”ê²ƒì´ ì•„ë‹ˆë‹¤.
    - ë²ˆë“¤ëŸ¬ëŠ” í•´ë‹¹ ëª¨ë“ˆ ì„í¬íŠ¸ë¥¼ ì„œë²„ ì½”ë“œì™€ í´ë¼ì´ì–¸íŠ¸ ì½”ë“œ ê°„ì˜ ë°”ìš´ë”ë¦¬ë¡œ ì²˜ë¦¬í•œë‹¤.
    - ì»´í¬ë„ŒíŠ¸ ëª¨ë“ˆì´ 'use client' ì§€ì‹œë¬¸ì„ í¬í•¨í•˜ë©´ í•´ë‹¹ ì»´í¬ë„ŒíŠ¸ëŠ” í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸ì„ì´ ë³´ì¥ëœë‹¤.
    - `SSR`ì—ì„œ ëœë”ë§ ëœ ì ì • HTMLì´ Clientì—ì„œ `Hydration`ì´ í•„ìš”í•œ ì»´í¬ë„ŒíŠ¸ë¼ê³  ì•Œë ¤ì£¼ëŠ” ì‘ì—…ì´ë‹¤.
      - ì¢€ ë” ì‰½ê²Œ ì´í•´í•˜ìë©´ ëª…ë ¹ì–´ ìì²´ê°€ `"use hydration"`ë¼ê³ í•˜ë©´ ë” ì§ê´€ì ì´ì˜€ì„ ê²ƒì´ë‹¤.
        - NextJsì—ì„œ ì»´í¬ë„ŒíŠ¸ ë³„ë¡œ ì–´ë–¤ê²ƒì´ ì •ì ì¸ ì»´í¬ë„ŒíŠ¸ì¸ì§€ Interactiveí•œ ì»´í¬ë„ŒíŠ¸ì¸ì§€ ì•Œë ¤ì£¼ëŠ” ê²ƒì´ë¼ ìƒê°í•˜ì

## Hydration

```properties
# ğŸ’¬ ì‰½ê²Œ ì„¤ëª…í•˜ìë©´ SSRë¡œ ë°›ì•„ì˜¨ ì •ì ì¸ HTMLì„ ì´ˆê¸°ì— ë³´ì—¬ì¤€ ì´í›„ React Applicationìœ¼ë¡œ ì´ˆê¸°í™” í•˜ëŠ” ì‘ì—…ì´ë‹¤.
#   - ì •ì  HTMLë¥¼ ë³´ì—¬ì¤€ í›„ ê·¸ìœ„ì— ì‚¬ìš©ìëŠ” ì•Œ ìˆ˜ ì—†ê²Œ ì¸í„°ë ‰í‹°ë¸Œí•œ Reactë¡œ ë®ì–´ ì”Œìš´ë‹¤ê³  ìƒê°í•´ë„ ì¢‹ë‹¤
#   - Hydrationì˜ ì‚¬ì „ì  ëœ»ì€ ìˆ˜ë¶„ ê³µê¸‰ì´ë‹¤. ì´ì™€ê°™ì´ ì •ì ì¸ HTMLì„ ë³´ì—¬ì¤€ í›„ ì‚¬ìš©ì ë° SEOì— ìµœì í™” í•œ ì´ í›„ Reactë¡œ ë³€í™˜ í•´ì£¼ëŠ” ê²ƒ
#     ã„´> ì´ˆê¸° í™”ë©´ë„ ë³´ì—¬ì£¼ë©´ì„œ Interaction(ìƒí˜¸ì‘ìš©)ê¹Œì§€ ì˜¬ë¼ê°€ëŠ” íš¨ê³¼ê°€ ìˆë‹¤.
```

- íë¦„
  - Javascript ë¯¸ ë¡œë”© (Hydration ì‚¬ìš© ë¶ˆê°€ëŠ¥ ê²½ìš°)
    - ë©”ì¸í™”ë©´ ìš”ì²­ -> SSR ì •ì ì¸ í™”ë©´ í‘œì¶œ -> Javascriptê°€ ì•„ì§ ë¡œë”© ë˜ì§€ ì•Šì€ ìƒíƒœ -> `a href` í´ë¦­ -> í™”ë©´ ê¹œë¹¡ì´ë©° ì´ë™
  - Hydration ì‚¬ìš©ê°€ëŠ¥
    - ë©”ì¸í™”ë©´ ìš”ì²­ -> SSR ì •ì ì¸ í™”ë©´ í‘œì¶œ í›„ `Hydration ì‹œì‘` -> `a href` í´ë¦­ -> ì»´í¬ë„ŒíŠ¸ë¡œ ë§Œë“¤ì–´ì§„ í™”ë©´ ì´ë™ **ê¹œë¹¡ì„ X**
- ì¶”ê°€
  - `useState()`ë¥¼ ì‚¬ìš©í•´ì„œ ì¹´ìš´íŠ¸ë¥¼ ì˜¬ë¦¬ëŠ” í…ŒìŠ¤íŠ¸ ì‹œì—ë„ í™”ë©´ì— ë²„íŠ¼ê³¼ ì¹´ìš´íŠ¸ëŠ” ë³´ì´ì§€ë§Œ Javascript ë¯¸ ë¡œë”© ì‹œ **ì´ë²¤íŠ¸ëŠ” ë¯¸ì‘ë™ ã„´í•¨**

## Layouts

- ì–´ëŠ í˜ì´ì§€ë¥¼ ê°€ë”ë¼ë„ ì²«ë²ˆì¨°ë¡œ ì‹œì‘ë˜ëŠ” íŒŒì¼ì€ `app/layout.tsx`íŒŒì¼ì´ë‹¤.

  - í•´ë‹¹ íŒŒì¼ì—ì„œ ëœë”ë§ì„ ì‹œì‘í•´ `path` ì •ë³´ë¥¼ ì½ê³  ë¶ˆëŸ¬ì˜¤ëŠ” ê°œë…ì´ë‹¤.

    - Parameterë¡œ ë“¤ì–´ì˜¤ëŠ” `children`ì— í•´ë‹¹ `Path`ì— ë§ëŠ” ì»´í¬ëŠ”íŠ¸ê°€ `prop`ë˜ëŠ” ê²ƒì´ë‹¤.

    ```javascript
    /** layout.tsx **/
    export const metadata = {
      title: "Next.js",
      description: "Generated by Next.js",
    };

    export default function RootLayout({
      children,
    }: {
      children: React.ReactNode,
    }) {
      return (
        <html lang="en">
          <body>
            <h6>ì—¬ê¸°ì— ë¬´ì—‡ì„ ë„£ë“  globalí•˜ê²Œ ì ìš©ëœë‹¤.</h6>
            {children}
          </body>
        </html>
      );
    }
    ```

- `layout.tsx`íŒŒì¼ì€ ì—¬ëŸ¬ê°œ ì¡´ì¬í•´ë„ ìƒê´€ì—†ë‹¤.

  - ë§Œì•½ `/about-us/**` ì™€ ê°™ì´ í•´ë‹¹ `path`ë’¤ì— ê³µí†µ ì ìš©ì´ í•„ìš”í•œ Layoutì´ ìˆë‹¤ë©´ í•´ë‹¹ directoryì— ë§Œë“¤ì–´ì£¼ë©´ ëœë‹¤.

  ![Alt text](image-3.png)

- Root `layout.tsx`ì„ `Path`ì— ë”°ë¼ ë¶„ê¸°í•˜ëŠ” ë°©ë²•ì€ ë”°ë¡œ ì—†ë‹¤.
  - `"use client"`ë¥¼ ì‚¬ìš©í•œë‹¤í•´ë„ MetaData ì‚¬ìš© ë¶ˆê°€ëŠ¥í•˜ê¸°ì— ë¬¸ì œê°€ ìˆìŒ
  - ë°©ë²•
    - Root Layoutì—ì„œ ë¶€ë¥´ëŠ” í•˜ìœ„ í˜ì´ì§€ ì»´í¬ë„ŒíŠ¸ì—ì„œ ë¶„ê¸° ì²˜ë¦¬
    - ìƒë‹¨ì—ì„œ ì‚¬ìš©í–ˆë˜ Pathë³„ êµ¬ë¶„ ë°©ë²•ì„ ì‚¬ìš©í•´ì„œ layoutì„ ì—¬ëŸ¬ê°œ ë‘ì–´ ì²˜ë¦¬í•˜ì ( ğŸ‘ ì›ì¹˜ì•ŠëŠ” `path`ê°€ ì•ì— ë¶™ê¸°ëŠ” í•¨ )
    - `Route Groups`ë¥¼ ì‚¬ìš© ( ğŸ‘ ì˜ë„ì¹˜ ì•Šì€ pathê°€ ìƒì„±ë˜ì§€ ì•ŠëŠ”ë‹¤. )

## Route Groups

- `app` í´ë” ë‚´ì˜ ìœ„ê³„ëŠ” URL ê²½ë¡œë“¤ì— ì§ì ‘ì ìœ¼ë¡œ ë§¤í•‘ëœë‹¤. ê·¸ëŸ¬ë‚˜, ë£¨íŠ¸ ê·¸ë£¹ì„ ìƒì„±í•˜ëŠ” ê²ƒì„ í†µí•´ ì´ëŸ¬í•œ íŒ¨í„´ì„ ë¬´ì‹œí•  ìˆ˜ ìˆë‹¤. ë£¨íŠ¸ ê·¸ë£¹ì€ `(ì§€ì •ëª…)`ìœ¼ë¡œ í´ë”ë¥¼ ë§Œë“¤ì–´ í•´ë‹¹ í´ë”ë¥¼ êµ¬ì„±í•˜ë©´ ëœë‹¤.

  - URL êµ¬ì¡°ì— ì˜í–¥ì„ ì£¼ì§€ ì•Šìœ¼ë©´ì„œ ë£¨íŠ¸ë“¤ì„ ì¡°ì§í•˜ëŠ” ê²½ìš°
  - ë ˆì´ì•„ì›ƒì— íŠ¹ì •í•œ ë£¨íŠ¸ ì„¸ê·¸ë¨¼íŠ¸ë¥¼ ë„ì…í•˜ëŠ” ê²½ìš°
  - ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë¶„í• í•´ì„œ ì—¬ëŸ¬ ê°œì˜ ë£¨íŠ¸ ë ˆì´ì•„ì›ƒì„ ìƒì„±í•˜ëŠ” ê²½ìš°

- ê°„ë‹¨í•œ í…ŒìŠ¤íŠ¸

  - `localhost:3000/{ì§€ì • íŒ¨ìŠ¤}`ì—ë”°ë¼ ë‹¤ë¥´ê²Œ `layout.tsx`ë¥¼ ì ìš©í•˜ê²Œ í•¨

    - ì£¼ì˜ì‚¬í•­ì€ `layout.tsx` í•˜ë‚˜ì—ì„œ ë¶„ê¸°ì²˜ë¦¬ê°€ ì•„ë‹Œ ê°ê¸° ë‹¤ë¥¸ 2ê°œì˜ layoutì„ ë§Œë“¤ì–´ ê·¸ë£¹ë³„ë¡œ ì ìš©í•œ ê²ƒ

  - í´ë” êµ¬ì¡°

    ![Alt text](image-4.png)

  - ê²°ê³¼

    - apple

      ![Alt text](image-5.png)

    - banana

      ![Alt text](image-6.png)

## MeataData

- ë ˆì´ì•„ì›ƒê³¼ í˜ì´ì§ë‚˜ ë©”íƒ€ë°ì´í„°ë¥¼ export í•  ìˆ˜ ìˆë‹¤
- ê°ê¸° ë‹¤ë¥¸ ë ˆì´ì•„ì›ƒì— ì ìš©í•˜ë©´ ë®ì–´ì”Œì›Œì§€ëŠ” ê°œë…ì´ ì•„ë‹Œ `Merge`ê°œë…ì´ë‹¤!
  - ë‹¤ë¥¸ Rootì—ì„œ `Title` í˜„ì¬ ìœ„ì¹˜ì˜ í™”ë©´ ì»´í¬ë„ŒíŠ¸ì—ì„œ `Description`ì´ë¼ë©´ 2ê°œê°€ í•©ì³ì ¸ì„œ í‘œì‹œ ëœë‹¤.
- ì‚¬ìš© ë°©ë²•
  ```javascript
  export const metadata = {
    title: "ë‚´ê°€ ì›í•˜ëŠ” íƒ€ì´í‹€",
    description:
      "ë ˆì´ì•„ì›ƒê³¼ í˜ì´ì§€ë¼ë©´ ì ìš©ì´ ê°€ëŠ¥í•˜ë‹¤! ë‹¨ Frameworkì´ê¸°ì— ë³€ìˆ˜ëª…ì€ ê³ ì •ì´ë‹¤",
  };
  ```
- Templateë¥¼ ì‚¬ìš©í•˜ë©´ ìì£¼ ì‚¬ìš©ë˜ëŠ” ë¬¸ìì€ ê³ ì •ìœ¼ë¡œ í•˜ê³  ë³€ìˆ˜ë¥¼ ë°›ì•„ ë„£ì„ ìˆ˜ ìˆë‹¤.

  - ì˜ˆì‹œ

    ```javascript
    /** Root Layout.tsx */
    export const metadata: Metadata = {
      title: {
        template: "%s |  ì•ì— ì˜¤ëŠ” ê²ƒì€ ë³€ìˆ˜ë¡œ ì¹˜í™˜ í•¨",
        default: "ê¸°ë³¸ê°’",
      },
      description: "ì„¤ëª… ì„¤ëª…",
    };

    /** about-us pase.tsx */
    export const metadata: Metadata = {
      title: "About-Us í˜ì´ì§€",
    };
    ```

  - ê²°ê³¼

    ![Alt text](image-7.png)

## Dynamic Routes

- `Path Variable` ì´ë‚˜ `Query Params`ë¥¼ ë°›ëŠ” ë°©ë²•

  - `Path Variable`

    - í´ë”ì˜ êµ¬ì¡°ë‚´ `[ì›í•˜ëŠ” Keyëª…]`ì˜ í˜•íƒœë¥¼ ë§Œë“  í›„ í•˜ìœ„ì— `page.tsx`íŒŒì¼ì„ ë‘ë©´ ëœë‹¤.
    - ì˜ˆì‹œ

      ![Alt text](image-9.png)

    - ê²°ê³¼ : `http://localhost:3000/movies?page=21`
      ```properties
      /movies/123
      { params: { id: '123' }, searchParams: { page: '21' } }
      GET /movies/123?page=21 200 in 81ms
      ```
    - íš¨ìœ¨ì  ì½”ë“œ ë³€í™˜

      ```javascript
      import React from "react";
      // Interfaceë¥¼ í†µí•´ ê°’ ê³ ì •
      interface Props {
        params: { id: string };
        searchParams: { page: string };
      }

      export default function movieDetails({ params, searchParams }: Props) {
        return (
          <h1>
            Movie Details :: {params.id} || {searchParams.page}
          </h1>
        );
      }
      ```

  - `Query Params`
    - ì»´í¬ë„ŒíŠ¸ ë‚´ íŒŒë¼ë¯¸í„°ë¥¼ ë°›ìœ¼ë©´ ëœë‹¤ -> ì•„ë¬´ íŒŒë¼ë¯¸í„°ëª…ì´ë‚˜ ê°€ëŠ¥í•˜ë‹¤
    - ì˜ˆì‹œ
      ```javascript
      export default function movieMain(zero) {
        // { params: {}, searchParams: { page: '21' } }
        console.log(zero);
        return (
          <h1>
            Movie ë©”ì¸í˜ì´ì§€ - í•´ë‹¹ í™”ë©´ ì»´í¬ë„ŒíŠ¸ê°€ ì—†ìœ¼ë©´ "domain/movies" 404ê°€
            ëœ¸
          </h1>
        );
      }
      ```

## CSRì—ì„œì˜ Data Fetching

- `SSR`ì™€ì˜ ì°¨ì´ë¥¼ ìœ„í•´ ReMindë¥¼ ìœ„í•´ ì‘ì„±í•¨
- ì˜ˆì‹œ

  ```javascript
  "use client";

  import { useEffect, useState } from "react";

  export default function BlackGome() {
    // ë¡œë”© ìƒíƒœ ì²´í¬ë¥¼ ìœ„í•œ ë³€ìˆ˜
    const [isLoading, setIsLoading] = useState(true);
    // ë°ì´í„°ë¥¼ ë‹´ì„ ë³€ìˆ˜
    const [movie, setMovie] = useState([]);

    // 1. í•´ë‹¹ ì»´í¬ë„ŒíŠ¸ê°€ ì‹¤í–‰ë ë•Œ ìµœì´ˆ ì‹¤í–‰ì„ ìœ„í•¨
    useEffect(() => {
      getMovie();
    }, []);

    // 2. ë¹„ë™ê¸° í†µì‹ ì„ í†µí•´ ë°ì´í„°ë¥¼ ìš”ì²­
    const getMovie = async () => {
      const res = await fetch(
        "https://nomad-movies.nomadcoders.workers.dev/movies"
      );
      const json = await res.json();
      // 2.1 ë³€ìˆ˜ì— ë°ì´í„° ì‚½ì…
      setMovie(json);
      // 2.2 ë¡œë”© Falseë¡œ ë³€í™˜
      setIsLoading(false);
    };

    return (
      <>
        <h1>{isLoading ? "Loading ..." : JSON.stringify(movie)}</h1>
      </>
    );
  }
  ```

## SSRì—ì„œì˜ Data Fetching

```properties
# â„¹ï¸ NextJsëŠ” "Frame Work"ì´ê¸°ì— ë‚´ë¶€ì—ì„œ APIë¥¼ ìš”ì²­ì´ ê°€ëŠ¥í•˜ë‹¤!
#  - Fetch ëœ URLì„ ìë™ ìºì‹±í•´ì¤Œ
```

- ì£¼ì˜ ì‚¬í•­
  - `default`í•¨ìˆ˜ ì™¸ë¶€ì—ì„œ API Fetching ìš”ì²­ì„ í•˜ëŠ” ê²ƒì´ë‹¤
- CSR, SSR ê°ê°ì˜ ì¥ë‹¨ì ì´ ìˆìœ¼ë‹ˆ ì›í•˜ëŠ” í˜•ì‹ì„ ê³¨ë¼ì„œ ì‚¬ìš©í•˜ì
- ì˜ˆì‹œ

  ```javascript
  // 1. ëª©ë¡ì„ ë°›ì•„ì˜¬ API ì£¼ì†Œ
  const URL = "https://nomad-movies.nomadcoders.workers.dev/movies";

  /**
   * âœ¨ 2. Serverì—ì„œ ì´ë¤„ì§€ëŠ” ë°ì´í„° Fetching
   */
  async function getMovies() {
    try {
      const response = await fetch(URL);
      if (!response.ok) throw new Error("Network response was not ok");
      const data = await response.json();
      return data;
    } catch (error) {
      console.error("Failed to fetch movies:", error);
    }
  }

  /**
   * â„¹ï¸ awaitë¥¼ ì‚¬ìš©í•˜ê¸°ìœ„í•´ UIë¥¼ ê·¸ë ¤ì£¼ëŠ” default í•¨ìˆ˜ë¥¼ "async"ë¡œ ë³€ê²½í•´ ì¤˜ì•¼í•œë‹¤.
   */
  export default async function BlackGome() {
    // 3. awaitë¥¼ ì‚¬ìš©í•´ì„œ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ë©´ ë
    const movies = await getMovies();
    return (
      <>
        <h1>{JSON.stringify(movies)}</h1>
      </>
    );
  }
  ```

## SSRì—ì„œì˜ Loading ì ìš©

- ìë™ìœ¼ë¡œ SSRë°©ì‹ìœ¼ë¡œ Data Fetching ì‹œ ë‚´ê°€ ì§€ì •í•œ ë¡œë”© í™”ë©´ì„ ë³´ì—¬ì¤€ë‹¤
- ì£¼ì˜ì‚¬í•­
  - íŒŒì¼ëª…ì€ `laoding.tsx` ê³ ì •ì´ë‹¤.
  - Loadingì„ ì‚¬ìš©í•˜ë ¤ëŠ” íŒŒì¼ì˜ ê°™ì€ ë””ë ‰í† ë¦¬ ë‚´ì— ìœ„ì¹˜í•´ì•¼í•œë‹¤.
- ì˜ˆì‹œ

  ![Alt text](image-8.png)

  ```javascript
  // loading.tsx
  import React from "react";

  export default function loading() {
    return <div>loading</div>;
  }
  ```

## Parallel Data Fetching (ë³‘ë ¬ ì²˜ë¦¬)

- SSRì—ì„œ ê°ê°ì˜ ìš”ì²­ì€ `await`ë¡œ ì„ ì–¸ë˜ì–´ ìˆê¸°ì— ìˆœì°¨ ì²˜ë¦¬ë¥¼ í•˜ë©´ ì²«ë²ˆì§¸ ìš”ì²­ì˜ ì²˜ë¦¬ ì‹œê°„ë§Œí¼ ë‘ë²ˆì§¸ ìš”ì²­ì´ ì§„í–‰í•˜ì§€ ì•ŠëŠ”ë‹¤.
  - ë”°ë¼ì„œ `const [ëŒ€ìƒ1, ëŒ€ìƒ2] = await Promise.all([ ë¶ˆëŸ¬ì˜¤ëŠ” ëŒ€ìƒ , ë¶ˆëŸ¬ì˜¤ëŠ” ëŒ€ìƒ2 ])`ë¥¼ ì‚¬ìš©í•´ì„œ ë³‘ë ¬ì²˜ë¦¬ë¥¼ í•´ì£¼ì
- ì˜ˆì‹œ

  ```javascript
  import React from "react";
  import { API_URL } from "../../(home)/page";

  interface Props {
    params: { id: string };
    searchParams: { page: string };
  }

  const getMovie = async (id: string) => {
    const response = await fetch(`${API_URL}/${id}`);
    return await response.json();
  };

  const getVideos = async (id: string) => {
    const response = await fetch(`${API_URL}/${id}/videos`);
    return await response.json();
  };

  export default async function movieDetails({ params, searchParams }: Props) {
    // âœ¨ await Promise.allë¥¼ ì‚¬ìš©í•´ì„œ ë³‘ë ¬ ì²˜ë¦¬í•¨
    const [movie, videos] = await Promise.all([
      getMovie(params.id),
      getVideos(params.id),
    ]);
    return (
      <>
        <h1>
          Movie Name : {movie.title} || Movie Id : {params.id}
        </h1>
        <p>Vidoes : {JSON.stringify({ videos })}</p>
      </>
    );
  }
  ```
